(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3515:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>B});var r=a(5155),l=a(9427),s=a(7494),n=a(5239),i=a(2115),c=function(e){return e[e.EUR=0]="EUR",e[e.USD=1]="USD",e[e.SEK=2]="SEK",e}({});let d=(0,i.createContext)(null);function o(e){let{children:t}=e,[a,l]=(0,i.useState)({tour:"Final World Tour",band:"Slayer",venue:"Hanns-Martin-Schleyer-Halle",address:"Mercedesstra\xdfe 69\n70372 Stuttgart",datetime:new Date("2019-08-03T21:00:00.000Z"),seatType:"standing ticket",barcode:"My Event",price:69,background:null,currency:0,useBackground:!0}),s=(0,i.useCallback)(e=>l(t=>({...t,...e})),[l]);return(0,r.jsx)(d.Provider,{value:{data:a,setData:s},children:t})}let x=()=>{let e=(0,i.useContext)(d);if(!e)throw Error("useTicket must be used inside TicketProvider");return e};var u=a(309),h=a(740);function m(){let{data:e,setData:t}=x();return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{children:[(0,r.jsx)("span",{children:"Tour"}),(0,r.jsx)("input",{type:"text",value:e.tour,onChange:e=>t({tour:e.target.value})})]}),(0,r.jsxs)("label",{children:[(0,r.jsx)("span",{children:"Band"}),(0,r.jsx)("input",{type:"text",value:e.band,onChange:e=>t({band:e.target.value})})]}),(0,r.jsxs)("label",{children:[(0,r.jsx)("span",{children:"Venue"}),(0,r.jsx)("input",{type:"text",value:e.venue,onChange:e=>t({venue:e.target.value})})]}),(0,r.jsxs)("label",{children:[(0,r.jsx)("span",{children:"Address"}),(0,r.jsx)("textarea",{rows:2,value:e.address,onChange:e=>t({address:e.target.value}),className:"resize-none"})]}),(0,r.jsxs)("label",{children:[(0,r.jsx)("span",{children:"Time"}),(0,r.jsx)(h.Ay,{className:"w-full",showTimeInput:!0,selected:e.datetime,onChange:e=>t({datetime:e})})]}),(0,r.jsxs)("label",{children:[(0,r.jsx)("span",{children:"Price"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"number",step:"0.1",value:e.price,onChange:e=>t({price:Number(e.target.value)})}),(0,r.jsxs)("select",{value:e.currency,onChange:e=>t({currency:Number(e.target.value)}),children:[(0,r.jsx)("option",{value:c.EUR,children:"EUR"}),(0,r.jsx)("option",{value:c.USD,children:"USD"}),(0,r.jsx)("option",{value:c.SEK,children:"SEK"})]})]})]}),(0,r.jsxs)("label",{children:[(0,r.jsx)("span",{children:"Area"}),(0,r.jsx)("input",{type:"text",value:e.seatType,onChange:e=>t({seatType:e.target.value})})]}),(0,r.jsxs)("label",{children:[(0,r.jsx)("span",{children:"Barcode"}),(0,r.jsx)("input",{type:"text",value:e.barcode||"",onChange:e=>t({barcode:e.target.value})})]})]})}function g(e){return(0,i.useCallback)(t=>document.documentElement.style.setProperty(e,t),[e])}var b=a(6965);function p(e){let{variable:t}=e,a=(0,i.useRef)(null),[l,s]=(0,i.useState)(!1),[n,c]=(0,i.useState)("#FFFFFF"),d=g(t);(0,i.useEffect)(()=>{let e=getComputedStyle(document.documentElement).getPropertyValue(t).trim();if(e){let t=e;if(e.startsWith("rgb")){let a=e.match(/\d+/g);if(a&&a.length>=3){let e=parseInt(a[0]),r=parseInt(a[1]),l=parseInt(a[2]);t="#".concat(e.toString(16).padStart(2,"0")).concat(r.toString(16).padStart(2,"0")).concat(l.toString(16).padStart(2,"0"))}}c(t)}},[t]);let o=(0,i.useCallback)(()=>s(!1),[s]),x=(0,i.useCallback)(()=>s(e=>!e),[s]),u=(0,i.useCallback)(e=>{d(e),c(e)},[d,c]);return(0,i.useEffect)(()=>{let e=!1,t=!1,r=r=>{!e&&t&&(!a.current||a.current.contains(r.target)||o(r))},l=r=>{t=!!a.current,e=!!a.current&&a.current.contains(r.target)};return document.addEventListener("mousedown",l),document.addEventListener("touchstart",l),document.addEventListener("click",r),()=>{document.removeEventListener("mousedown",l),document.removeEventListener("touchstart",l),document.removeEventListener("click",r)}},[a,o]),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"size-8 border-2 border-white rounded-lg shadow-sm cursor-pointer",style:{backgroundColor:l?"transparent":n},onClick:()=>x()}),l&&(0,r.jsx)("div",{className:"absolute left-0 border-r-8 shadow-sm bottom-[calc(100%+2px)]",ref:a,children:(0,r.jsx)(b.jI,{color:n,onChange:u})})]})}function j(e){let{variable:t,label:a}=e;return(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-300",children:a}),(0,r.jsx)(p,{variable:t})]})}function f(e){let{variable:t,label:a,min:l=0,max:s=1e3}=e,n=(0,i.useCallback)(e=>{let t=getComputedStyle(document.documentElement).getPropertyValue(e).trim();if(t)if(t.endsWith("px"))return parseInt(t.replace("px",""))||0;else if(t.endsWith("rem"))return Math.round(16*parseFloat(t.replace("rem","")));else if(t.endsWith("mm"))return Math.round(3.78*parseFloat(t.replace("mm","")));else return parseInt(t)||0;throw Error("CSS Variable ".concat(e," not found"))},[]),c=g(t),d=(0,i.useMemo)(()=>n(t),[n,t]),[o,x]=(0,i.useState)(d),u=(0,i.useCallback)(e=>{let t=Math.max(l,Math.min(s,e));x(t),c("".concat(t,"px"))},[c,l,s]),h=(0,i.useCallback)(e=>{u(parseInt(e.target.value)||0)},[u]);return(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-300",children:a}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"number",value:o,onChange:h,min:l,max:s,className:"w-20 px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"px"})]})]})}var v=a(4550),k=a(1786),y=a(7135);function N(){let{data:e,setData:t}=x(),a=g("--ticket-bg-color");return(0,i.useEffect)(()=>{if(!e.background)return;let t=new Image;t.src=e.background,t.onload=()=>{a(function(e){let t=document.createElement("canvas"),a=t.getContext("2d");t.width=10,t.height=10,a.drawImage(e,0,0,10,10);let r=a.getImageData(0,0,10,10).data,l=0,s=0,n=0;for(let e=0;e<r.length;e+=4)l+=r[e],s+=r[e+1],n+=r[e+2];let i=r.length/4;return l=Math.floor(l/i),s=Math.floor(s/i),n=Math.floor(n/i),"#".concat((0,v.A)(l,s,n))}(t))}},[e.background,a]),(0,r.jsxs)("div",{className:"flex w-full gap-2 items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:e.useBackground,onChange:e=>t({useBackground:e.target.checked})}),(0,r.jsx)("div",{children:(0,r.jsxs)("label",{className:"block w-full p-1 text-center bg-gray-300 dark:bg-gray-600 rounded cursor-pointer hover:bg-gray-400 dark:hover:bg-gray-700",children:[(0,r.jsx)("input",{type:"file",accept:".jpeg,.png,.jpg",onChange:e=>{e.target.files&&e.target.files[0]&&t({background:URL.createObjectURL(e.target.files[0])})},className:"hidden",id:"background-upload"}),(0,r.jsx)(k.A,{})]})}),(0,r.jsx)("button",{disabled:!e.background,className:"block p-1 text-center bg-gray-300 dark:bg-gray-600 rounded ".concat(e.background?"cursor-pointer hover:bg-gray-400 dark:hover:bg-gray-700":""),children:(0,r.jsx)(y.A,{color:e.background?"red":"gray",onClick:()=>t({background:null})})}),(0,r.jsx)(p,{variable:"--ticket-bg-color"})]})}function w(e){let{children:t,title:a}=e;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-200 border-b border-gray-700 pb-1",children:a}),(0,r.jsx)("div",{className:"space-y-4",children:t})]})}function C(){return(0,r.jsxs)("div",{className:"space-y-12",children:[(0,r.jsx)(w,{title:"Background",children:(0,r.jsx)(N,{})}),(0,r.jsx)(w,{title:"Dimensions",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsx)(f,{variable:"--ticket-width",label:"Width",min:200,max:1200}),(0,r.jsx)(f,{variable:"--ticket-height",label:"Height",min:100,max:600})]})}),(0,r.jsxs)(w,{title:"Header",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsx)(j,{variable:"--ticket-header-bg",label:"Background Color"}),(0,r.jsx)(j,{variable:"--ticket-header-text",label:"Text Color"})]}),(0,r.jsx)(f,{variable:"--ticket-header-height",label:"Height",min:20,max:100})]}),(0,r.jsxs)(w,{title:"Typography",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsx)(j,{variable:"--ticket-text",label:"Primary Text Color"}),(0,r.jsx)(j,{variable:"--ticket-text-alt",label:"Alt Text Color"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsx)(f,{variable:"--ticket-font-size",label:"Font Size",min:8,max:24}),(0,r.jsx)(f,{variable:"--ticket-font-size-large",label:"Large Font Size",min:12,max:32})]}),(0,r.jsx)(f,{variable:"--ticket-font-size-small",label:"Small Font Size",min:6,max:16})]}),(0,r.jsxs)(w,{title:"Spacing",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsx)(f,{variable:"--ticket-padding",label:"Outer Padding",min:0,max:50}),(0,r.jsx)(f,{variable:"--ticket-padding-content",label:"Content Padding",min:0,max:50})]}),(0,r.jsx)(f,{variable:"--ticket-padding-inner",label:"Inner Padding",min:0,max:25})]}),(0,r.jsxs)(w,{title:"Barcode",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsx)(j,{variable:"--ticket-barcode-color",label:"Color"}),(0,r.jsx)(j,{variable:"--ticket-barcode-bg",label:"Background"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsx)(f,{variable:"--ticket-barcode-width",label:"Width",min:50,max:300}),(0,r.jsx)(f,{variable:"--ticket-barcode-height",label:"Height",min:20,max:100})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsx)(f,{variable:"--ticket-barcode-max-width",label:"Max Width",min:100,max:400}),(0,r.jsx)(f,{variable:"--ticket-barcode-text-size",label:"Text Size",min:8,max:20})]})]})]})}function S(e){let{ticketCount:t,setTicketCount:a}=e,[l,s]=(0,i.useState)("content");return(0,r.jsxs)("div",{className:"w-80 bg-white dark:bg-gray-800 shadow-sm border-l p-4 h-full flex flex-col overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex mb-4 border-b border-gray-200 dark:border-gray-600",children:[(0,r.jsx)("button",{className:"flex-1 px-4 py-2 text-sm font-medium transition-colors ".concat("content"===l?"text-blue-600 border-b-2 border-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"),onClick:()=>s("content"),children:"Content"}),(0,r.jsx)("button",{className:"flex-1 px-4 py-2 text-sm font-medium transition-colors ".concat("styling"===l?"text-blue-600 border-b-2 border-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"),onClick:()=>s("styling"),children:"Styling"})]}),(0,r.jsxs)("div",{className:"flex-1 space-y-2 mb-10",children:["content"===l&&(0,r.jsx)(m,{}),"styling"===l&&(0,r.jsx)(C,{})]}),(0,r.jsx)("div",{className:"mt-auto",children:(0,r.jsxs)("div",{className:"flex flex-1 items-center gap-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Tickets per page:"}),(0,r.jsxs)("select",{value:t,onChange:e=>a(Number(e.target.value)),className:"border p-1 rounded",children:[(0,r.jsx)("option",{value:1,children:"1"}),(0,r.jsx)("option",{value:2,children:"2"}),(0,r.jsx)("option",{value:3,children:"3"})]}),(0,r.jsxs)("button",{onClick:()=>window.print(),className:"mt-auto flex items-center justify-center p-2 bg-[var(--accent)] text-white rounded hover:bg-blue-600 flex-1",children:[(0,r.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Print"]})]})})]})}var E=a(1001),z=a.n(E),T=a(7265),P=a.n(T),I=a(7883),M=a.n(I);function F(){let{data:e}=x(),t=e.barcode,[a,l]=(0,i.useState)({maxWidth:180,height:30,color:"#000000",background:"transparent"});if((0,i.useEffect)(()=>{{let e=getComputedStyle(document.documentElement);l({maxWidth:parseInt(e.getPropertyValue("--ticket-barcode-max-width"))||180,height:parseInt(e.getPropertyValue("--ticket-barcode-height"))||30,color:e.getPropertyValue("--ticket-barcode-color")||"#000000",background:e.getPropertyValue("--ticket-barcode-bg")||"transparent"})}},[]),!t)return null;let s=.6,n=a.maxWidth,c=11*t.length*s;c<n&&(s=n/(11*t.length),c=11*t.length*s);let d=c>n?n:c;return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center overflow-hidden",style:{width:"".concat(d,"px"),maxWidth:"".concat(n,"px")},children:[(0,r.jsx)("div",{className:"overflow-hidden",children:(0,r.jsx)(M(),{value:t,height:a.height,displayValue:!1,width:s,lineColor:a.color,background:a.background,renderer:"svg",className:"-m-2.5"})}),(0,r.jsx)("p",{className:"ticket-barcode-text-size ticket-barcode-max-width z-10 text-center truncate",children:t})]})}function A(){var e;let{data:t}=x();return(0,r.jsxs)("div",{id:"ticket",className:"ticket-width ticket-height ticket-bg ticket-shadow ticket-font-size flex flex-col ".concat(P().className," ").concat(t.useBackground?"ticket-text-alt":"ticket-text"),children:[(0,r.jsx)("div",{className:"ticket-header-bg ticket-header-height ticket-header-text ticket-padding font-bold flex items-center",children:"Some Brand"}),(0,r.jsxs)("div",{className:"ticket-padding-content flex flex-1",children:[(0,r.jsx)("div",{className:"ticket-barcode-width flex items-center justify-center",children:t.barcode&&(0,r.jsx)("div",{className:"rotate-270 text-black flex flex-col items-center w-[180px] over",children:(0,r.jsx)(F,{})})}),(0,r.jsxs)("div",{className:"ticket-padding-inner ticket-font-size-large relative flex flex-1 flex-col h-full ".concat(t.useBackground?"ticket-bg-color":"ticket-bg"),children:[t.useBackground&&t.background&&(0,r.jsx)("img",{src:t.background,className:"absolute top-[2px] bottom-[2px] left-3/5 -translate-x-1/2 h-[calc(100%-4px)] object-cover [mask-image:linear-gradient(to_right,transparent_0%,black_15%,black_85%,transparent_100%)]"}),(0,r.jsxs)("div",{className:"z-10 flex flex-col h-full justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"ticket-font-size-small",children:t.tour}),(0,r.jsx)("p",{children:t.band})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:t.venue}),(0,r.jsx)("p",{className:"ticket-font-size-small whitespace-pre-line",children:t.address})]}),(0,r.jsxs)("p",{children:[z()(t.datetime).format("dddd, DD. MMM YYYY, HH:mm")," Uhr"]}),(0,r.jsxs)("p",{children:[(e=t.price,t.currency===c.SEK?e.toFixed(0):e.toFixed(2))," ",c[t.currency]]}),(0,r.jsx)("p",{children:t.seatType})]})]})]})]})}function B(){let[e,t]=(0,i.useState)(1),[a,c]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{a?document.documentElement.setAttribute("data-theme","dark"):document.documentElement.removeAttribute("data-theme")},[a]),(0,r.jsxs)(o,{children:[(0,r.jsx)("div",{id:"print-wrapper",className:"h-screen hidden print:flex flex-col justify-between",children:Array.from({length:e}).map((e,t)=>(0,r.jsx)("div",{className:"print-ticket",children:(0,r.jsx)(A,{})},t))}),(0,r.jsxs)("div",{className:"flex w-screen h-screen print:hidden",children:[(0,r.jsxs)("div",{className:"flex flex-1 h-screen flex-col p-5",children:[(0,r.jsx)("h1",{className:"text-3xl font-semibold tracking-tight",children:"Printed Event Nostalgia Information Sheets"}),(0,r.jsx)("p",{className:"text-base text-gray-600 dark:text-gray-400",children:"Create personalized tickets as keepsakes"}),(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center px-4",children:(0,r.jsx)(A,{})})]}),(0,r.jsx)("div",{children:(0,r.jsx)(S,{ticketCount:e,setTicketCount:t})}),(0,r.jsx)("button",{onClick:()=>window.open("https://github.com/felixhir/ticket-generator","_blank"),className:"absolute left-4 bottom-4 transition-transform transform hover:scale-110 cursor-pointer dark:bg-white rounded-full",children:(0,r.jsx)(n.default,{src:"github.svg",className:"-mt-[1px]",alt:"Github Icon",width:"50",height:"50"})}),(0,r.jsx)("button",{className:"absolute right-84 bottom-4 transition-transform transform hover:scale-110 cursor-pointer border rounded-full h-9 w-9 flex items-center justify-center",onClick:()=>c(!a),children:a?(0,r.jsx)(l.A,{}):(0,r.jsx)(s.A,{})})]})]})}},6765:(e,t,a)=>{Promise.resolve().then(a.bind(a,3515))}},e=>{e.O(0,[225,545,579,586,550,441,255,358],()=>e(e.s=6765)),_N_E=e.O()}]);