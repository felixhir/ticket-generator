(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{370:()=>{},1299:()=>{},6765:(e,t,r)=>{Promise.resolve().then(r.bind(r,8765))},8765:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>A});var s=r(5155),n=r(9427),a=r(7494),l=r(5239),c=r(2115),i=function(e){return e[e.EUR=0]="EUR",e[e.USD=1]="USD",e[e.SEK=2]="SEK",e}({});let o="#333333",d=(0,c.createContext)(null);function u(e){let{children:t}=e,[r,n]=(0,c.useState)({tour:"Final World Tour",band:"Slayer",venue:"Hanns-Martin-Schleyer-Halle",address:"Mercedesstra\xdfe 69\n70372 Stuttgart",datetime:new Date("2019-08-03T21:00:00.000Z"),seatType:"standing ticket",barcode:"My Event",price:69,background:null,currency:0,bgColor:o,useBackground:!0});return(0,s.jsx)(d.Provider,{value:{data:r,setData:e=>n(t=>({...t,...e}))},children:t})}let x=()=>{let e=(0,c.useContext)(d);if(!e)throw Error("useTicket must be used inside TicketProvider");return e};var h=r(1786),m=r(7135),g=r(309),p=r(6965),j=r(740),b=r(4550);function v(e){let{color:t,onChange:r}=e,n=(0,c.useRef)(null),[a,l]=(0,c.useState)(!1),i=(0,c.useCallback)(()=>l(!1),[]);return(0,c.useEffect)(()=>{let e=!1,t=!1,r=r=>{!e&&t&&(!n.current||n.current.contains(r.target)||i(r))},s=r=>{t=n.current,e=n.current&&n.current.contains(r.target)};return document.addEventListener("mousedown",s),document.addEventListener("touchstart",s),document.addEventListener("click",r),()=>{document.removeEventListener("mousedown",s),document.removeEventListener("touchstart",s),document.removeEventListener("click",r)}},[n,i]),(0,s.jsxs)("div",{className:"picker",children:[(0,s.jsx)("div",{className:"swatch",style:{backgroundColor:t},onClick:()=>l(!0)}),a&&(0,s.jsx)("div",{className:"popover",ref:n,children:(0,s.jsx)(p.jI,{color:t,onChange:r})})]})}function f(e){let{ticketCount:t,setTicketCount:r}=e,{data:n,setData:a}=x();return(0,c.useEffect)(()=>{if(!n.background)return void a({bgColor:o});let e=new Image;e.src=n.background,e.onload=()=>{a({bgColor:function(e){let t=document.createElement("canvas"),r=t.getContext("2d");t.width=10,t.height=10,r.drawImage(e,0,0,10,10);let s=r.getImageData(0,0,10,10).data,n=0,a=0,l=0;for(let e=0;e<s.length;e+=4)n+=s[e],a+=s[e+1],l+=s[e+2];let c=s.length/4;return n=Math.floor(n/c),a=Math.floor(a/c),l=Math.floor(l/c),"#".concat((0,b.A)(n,a,l))}(e)})}},[n.background]),(0,s.jsxs)("div",{className:"w-80 bg-white dark:bg-gray-800 shadow-sm border-l p-4 h-full flex flex-col space-y-2 overflow-y-auto",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("span",{children:"Tour"}),(0,s.jsx)("input",{type:"text",value:n.tour,onChange:e=>a({tour:e.target.value})})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("span",{children:"Band"}),(0,s.jsx)("input",{type:"text",value:n.band,onChange:e=>a({band:e.target.value})})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("span",{children:"Venue"}),(0,s.jsx)("input",{type:"text",value:n.venue,onChange:e=>a({venue:e.target.value})})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("span",{children:"Address"}),(0,s.jsx)("textarea",{rows:2,value:n.address,onChange:e=>a({address:e.target.value}),className:"resize-none"})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("span",{children:"Time"}),(0,s.jsx)(j.Ay,{className:"w-full",showTimeInput:!0,selected:n.datetime,onChange:e=>a({datetime:e})})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("span",{children:"Price"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"number",step:"0.1",value:n.price,onChange:e=>a({price:Number(e.target.value)})}),(0,s.jsxs)("select",{value:n.currency,onChange:e=>a({currency:Number(e.target.value)}),children:[(0,s.jsx)("option",{value:i.EUR,children:"EUR"}),(0,s.jsx)("option",{value:i.USD,children:"USD"}),(0,s.jsx)("option",{value:i.SEK,children:"SEK"})]})]})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("span",{children:"Area"}),(0,s.jsx)("input",{type:"text",value:n.seatType,onChange:e=>a({seatType:e.target.value})})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("span",{children:"Barcode"}),(0,s.jsx)("input",{type:"text",value:n.barcode||"",onChange:e=>a({barcode:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"Background"}),(0,s.jsxs)("div",{className:"flex w-full gap-2 items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:n.useBackground,onChange:e=>a({useBackground:e.target.checked})}),(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"block w-full p-1 text-center bg-gray-300 dark:bg-gray-600 rounded cursor-pointer hover:bg-gray-400 dark:hover:bg-gray-700",children:[(0,s.jsx)("input",{type:"file",accept:".jpeg,.png,.jpg",onChange:e=>{e.target.files&&e.target.files[0]&&a({background:URL.createObjectURL(e.target.files[0])})},className:"hidden",id:"background-upload"}),(0,s.jsx)(h.A,{})]})}),(0,s.jsx)("button",{disabled:!n.background,className:"block p-1 text-center bg-gray-300 dark:bg-gray-600 rounded ".concat(n.background?"cursor-pointer hover:bg-gray-400 dark:hover:bg-gray-700":""),children:(0,s.jsx)(m.A,{color:n.background?"red":"gray",onClick:()=>a({background:null})})}),(0,s.jsx)(v,{color:n.bgColor,onChange:e=>a({bgColor:e})}),(0,s.jsx)(p.HC,{color:n.bgColor,onChange:e=>a({bgColor:e}),className:"p-1 border rounded w-[3cm]"})]})]}),(0,s.jsx)("div",{className:"flex gap-2 items-center"}),(0,s.jsx)("div",{className:"mt-auto",children:(0,s.jsxs)("div",{className:"flex flex-1 items-center gap-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Tickets per page:"}),(0,s.jsxs)("select",{value:t,onChange:e=>r(Number(e.target.value)),className:"border p-1 rounded",children:[(0,s.jsx)("option",{value:1,children:"1"}),(0,s.jsx)("option",{value:2,children:"2"}),(0,s.jsx)("option",{value:3,children:"3"})]}),(0,s.jsxs)("button",{onClick:()=>window.print(),className:"mt-auto flex items-center justify-center p-2 bg-[var(--accent)] text-white rounded hover:bg-blue-600 flex-1",children:[(0,s.jsx)(g.A,{className:"w-4 h-4 mr-2"}),"Print"]})]})})]})}r(370),r(1299);var k=r(1001),N=r.n(k),y=r(5273),w=r.n(y),C=r(7883),E=r.n(C);function S(){let{data:e}=x(),t=e.barcode;if(!t)return null;let r=.6,n=11*t.length*r;n<180&&(r=180/(11*t.length),n=11*t.length*r);let a=n>180?180:n;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center overflow-hidden",style:{width:"".concat(a,"px"),maxWidth:"".concat(180,"px")},children:[(0,s.jsx)("div",{className:"overflow-hidden",children:(0,s.jsx)(E(),{value:t,height:30,displayValue:!1,width:r,lineColor:"#000000",background:"",renderer:"svg",className:"-m-2.5"})}),(0,s.jsx)("p",{className:"z-10 text-center text-xs truncate max-w-[180px]",children:t})]})}function T(){var e;let{data:t}=x();return(0,s.jsxs)("div",{id:"ticket",className:"shadow-lg w-[760px] h-[300px] bg-white flex flex-col text-[15px] ".concat(w().className," ").concat(t.useBackground?"text-white":"text-black"),children:[(0,s.jsx)("div",{className:" bg-orange-400 h-[3rem] font-bold p-1 flex items-center",children:"Some Brand"}),(0,s.jsxs)("div",{className:"p-2 flex flex-1",children:[(0,s.jsx)("div",{className:"w-[75px] flex items-center justify-center",children:t.barcode&&(0,s.jsx)("div",{className:"rotate-270 text-black flex flex-col items-center w-[180px] over",children:(0,s.jsx)(S,{})})}),(0,s.jsxs)("div",{className:"relative px-1 flex flex-1 flex-col h-full text-[4mm]",style:{backgroundColor:t.useBackground?t.bgColor:"white"},children:[t.useBackground&&t.background&&(0,s.jsx)("img",{src:t.background,className:"absolute top-[2px] bottom-[2px] left-3/5 -translate-x-1/2 h-[calc(100%-4px)] object-cover [mask-image:linear-gradient(to_right,transparent_0%,black_15%,black_85%,transparent_100%)]"}),(0,s.jsxs)("div",{className:"z-10 flex flex-col h-full justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-[2mm]",children:t.tour}),(0,s.jsx)("p",{children:t.band})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{children:t.venue}),(0,s.jsx)("p",{className:"whitespace-pre-line text-[2mm]",children:t.address})]}),(0,s.jsxs)("p",{children:[N()(t.datetime).format("dddd, DD. MMM YYYY, HH:mm")," Uhr"]}),(0,s.jsxs)("p",{children:[(e=t.price,t.currency===i.SEK?e.toFixed(0):e.toFixed(2))," ",i[t.currency]]}),(0,s.jsx)("p",{children:t.seatType})]})]})]})]})}function A(){let[e,t]=(0,c.useState)(1),[r,i]=(0,c.useState)(!0);return(0,c.useEffect)(()=>{r?document.documentElement.setAttribute("data-theme","dark"):document.documentElement.removeAttribute("data-theme")},[r]),(0,s.jsxs)(u,{children:[(0,s.jsx)("div",{id:"print-wrapper",className:"h-screen hidden print:flex flex-col justify-between",children:Array.from({length:e}).map((e,t)=>(0,s.jsx)("div",{className:"print-ticket",children:(0,s.jsx)(T,{})},t))}),(0,s.jsxs)("div",{className:"flex w-screen h-screen print:hidden",children:[(0,s.jsxs)("div",{className:"flex flex-1 h-screen flex-col p-5",children:[(0,s.jsx)("h1",{className:"text-3xl font-semibold tracking-tight",children:"Printed Event Nostalgia Information Sheets"}),(0,s.jsx)("p",{className:"text-base text-gray-600 dark:text-gray-400",children:"Create personalized tickets as keepsakes"}),(0,s.jsx)("div",{className:"flex-1 flex items-center justify-center px-4",children:(0,s.jsx)(T,{})})]}),(0,s.jsx)("div",{children:(0,s.jsx)(f,{ticketCount:e,setTicketCount:t})}),(0,s.jsx)("button",{onClick:()=>window.open("https://github.com/felixhir/ticket-generator","_blank"),className:"absolute left-4 bottom-4 transition-transform transform hover:scale-110 cursor-pointer dark:bg-white rounded-full",children:(0,s.jsx)(l.default,{src:"github.svg",className:"-mt-[1px]",alt:"Github Icon",width:"50",height:"50"})}),(0,s.jsx)("button",{className:"absolute right-84 bottom-4 transition-transform transform hover:scale-110 cursor-pointer border rounded-full h-9 w-9 flex items-center justify-center",onClick:()=>i(!r),children:r?(0,s.jsx)(n.A,{}):(0,s.jsx)(a.A,{})})]})]})}}},e=>{e.O(0,[440,545,579,586,790,441,255,358],()=>e(e.s=6765)),_N_E=e.O()}]);