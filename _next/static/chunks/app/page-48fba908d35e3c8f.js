(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{370:()=>{},6765:(e,r,l)=>{Promise.resolve().then(l.bind(l,8765))},8765:(e,r,l)=>{"use strict";l.r(r),l.d(r,{default:()=>E});var t=l(5155),s=l(1001),a=l.n(s),n=l(5273),c=l.n(n),d=l(2115),o=function(e){return e[e.EUR=0]="EUR",e[e.USD=1]="USD",e[e.SEK=2]="SEK",e}({});let i="#333333",x=(0,d.createContext)(null);function u(e){let{children:r}=e,[l,s]=(0,d.useState)({tour:"Final World Tour",band:"Slayer",venue:"Hanns-Martin-Schleyer-Halle",address:"Mercedesstra\xdfe 69\n70372 Stuttgart",datetime:new Date("2019-08-03T21:00:00.000Z"),seatType:"standing ticket",barcode:"My Event",price:69,background:null,currency:0,bgColor:i});return(0,t.jsx)(x.Provider,{value:{data:l,setData:e=>s(r=>({...r,...e}))},children:r})}let h=()=>{let e=(0,d.useContext)(x);if(!e)throw Error("useTicket must be used inside TicketProvider");return e};var m=l(7883),p=l.n(m);function j(){let{data:e}=h(),r=e.barcode;if(!r)return null;let l=.6,s=11*r.length*l;s<180&&(l=180/(11*r.length),s=11*r.length*l);let a=s>180?180:s;return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center overflow-hidden",style:{width:"".concat(a,"px"),maxWidth:"".concat(180,"px")},children:[(0,t.jsx)("div",{className:"overflow-hidden",children:(0,t.jsx)(p(),{value:r,height:30,displayValue:!1,width:l,lineColor:"#000000",background:"",renderer:"svg",className:"-m-2.5"})}),(0,t.jsx)("p",{className:"z-10 text-center text-xs truncate max-w-[180px]",children:r})]})}function g(){var e;let{data:r}=h();return(0,t.jsxs)("div",{id:"ticket",className:"shadow-lg w-[760px] h-[300px] flex flex-col text-white text-[15px] ".concat(c().className),children:[(0,t.jsx)("div",{className:" bg-orange-400 h-[3rem] font-bold p-1 flex items-center",children:"Some Brand"}),(0,t.jsxs)("div",{className:"p-2 flex flex-1",children:[(0,t.jsx)("div",{className:"w-[75px] flex items-center justify-center",children:r.barcode&&(0,t.jsx)("div",{className:"rotate-270 text-black flex flex-col items-center w-[180px] over",children:(0,t.jsx)(j,{})})}),(0,t.jsxs)("div",{className:"relative px-1 flex flex-1 flex-col  h-full text-white text-[4mm] {}",style:{backgroundColor:r.bgColor},children:[r.background&&(0,t.jsx)("img",{src:r.background,className:"absolute top-[2px] bottom-[2px] left-3/5 -translate-x-1/2 h-[calc(100%-4px)] object-cover [mask-image:linear-gradient(to_right,transparent_0%,black_15%,black_85%,transparent_100%)]"}),(0,t.jsxs)("div",{className:"z-10 flex flex-col h-full justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[2mm]",children:r.tour}),(0,t.jsx)("p",{children:r.band})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:r.venue}),(0,t.jsx)("p",{className:"whitespace-pre-line text-[2mm]",children:r.address})]}),(0,t.jsxs)("p",{children:[a()(r.datetime).format("dddd, DD. MMM YYYY, HH:mm")," Uhr"]}),(0,t.jsxs)("p",{children:[(e=r.price,r.currency===o.SEK?e.toFixed(0):e.toFixed(2))," ",o[r.currency]]}),(0,t.jsx)("p",{children:r.seatType})]})]})]})]})}var f=l(1786),b=l(7135),v=l(309),N=l(6965),k=l(740),y=l(4550);function w(e){let{color:r,onChange:l}=e,s=(0,d.useRef)(null),[a,n]=(0,d.useState)(!1),c=(0,d.useCallback)(()=>n(!1),[]);return(0,d.useEffect)(()=>{let e=!1,r=!1,l=l=>{!e&&r&&(!s.current||s.current.contains(l.target)||c(l))},t=l=>{r=s.current,e=s.current&&s.current.contains(l.target)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),document.addEventListener("click",l),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t),document.removeEventListener("click",l)}},[s,c]),(0,t.jsxs)("div",{className:"picker",children:[(0,t.jsx)("div",{className:"swatch",style:{backgroundColor:r},onClick:()=>n(!0)}),a&&(0,t.jsx)("div",{className:"popover",ref:s,children:(0,t.jsx)(N.jI,{color:r,onChange:l})})]})}function C(e){let{ticketCount:r,setTicketCount:l}=e,{data:s,setData:a}=h();return(0,d.useEffect)(()=>{if(!s.background)return void a({bgColor:i});let e=new Image;e.src=s.background,e.onload=()=>{a({bgColor:function(e){let r=document.createElement("canvas"),l=r.getContext("2d");r.width=10,r.height=10,l.drawImage(e,0,0,10,10);let t=l.getImageData(0,0,10,10).data,s=0,a=0,n=0;for(let e=0;e<t.length;e+=4)s+=t[e],a+=t[e+1],n+=t[e+2];let c=t.length/4;return s=Math.floor(s/c),a=Math.floor(a/c),n=Math.floor(n/c),"#".concat((0,y.A)(s,a,n))}(e)})}},[s.background]),(0,t.jsxs)("div",{className:"bg-gray-200 border-l p-4 h-full flex flex-col text-black space-y-2 overflow-y-auto",children:[(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{children:"Tour"}),(0,t.jsx)("input",{type:"text",value:s.tour,onChange:e=>a({tour:e.target.value}),className:"border p-1 rounded"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{children:"Band"}),(0,t.jsx)("input",{type:"text",value:s.band,onChange:e=>a({band:e.target.value}),className:"border p-1 rounded"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{children:"Venue"}),(0,t.jsx)("input",{type:"text",value:s.venue,onChange:e=>a({venue:e.target.value}),className:"border p-1 rounded"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{children:"Address"}),(0,t.jsx)("textarea",{rows:2,value:s.address,onChange:e=>a({address:e.target.value}),className:"border p-1 resize-none rounded"})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{children:"Time"}),(0,t.jsx)(k.Ay,{className:"border p-1 w-full rounded",showTimeInput:!0,selected:s.datetime,onChange:e=>a({datetime:e})})]}),(0,t.jsxs)("label",{children:[(0,t.jsx)("span",{children:"Price"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"number",step:"0.1",value:s.price,onChange:e=>a({price:Number(e.target.value)}),className:"flex-1 border p-1 rounded"}),(0,t.jsxs)("select",{className:"border rounded p-1",value:s.currency,onChange:e=>a({currency:Number(e.target.value)}),children:[(0,t.jsx)("option",{value:o.EUR,children:"EUR"}),(0,t.jsx)("option",{value:o.USD,children:"USD"}),(0,t.jsx)("option",{value:o.SEK,children:"SEK"})]})]})]}),(0,t.jsxs)("label",{className:"flex flex-col",children:[(0,t.jsx)("span",{children:"Area"}),(0,t.jsx)("input",{type:"text",value:s.seatType,onChange:e=>a({seatType:e.target.value}),className:"border p-1 rounded"})]}),(0,t.jsxs)("label",{children:[(0,t.jsx)("span",{children:"Barcode"}),(0,t.jsx)("input",{type:"text",value:s.barcode||"",onChange:e=>a({barcode:e.target.value}),className:"w-full border p-1 rounded"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{children:"Background"}),(0,t.jsxs)("div",{className:"flex w-full gap-2",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("label",{className:"block w-full p-1 text-center bg-gray-300 rounded cursor-pointer hover:bg-gray-400",children:[(0,t.jsx)("input",{type:"file",accept:".jpeg,.png,.jpg",onChange:e=>{e.target.files&&e.target.files[0]&&a({background:URL.createObjectURL(e.target.files[0])})},className:"hidden",id:"background-upload"}),(0,t.jsx)(f.A,{})]})}),(0,t.jsx)("button",{disabled:!s.background,className:"block p-1 text-center bg-gray-300 rounded cursor-pointer hover:bg-gray-400",children:(0,t.jsx)(b.A,{color:s.background?"red":"gray",onClick:()=>a({background:null})})}),(0,t.jsx)(w,{color:s.bgColor,onChange:e=>a({bgColor:e})}),(0,t.jsx)(N.HC,{color:s.bgColor,onChange:e=>a({bgColor:e}),className:"p-1 border rounded w-[3cm]"})]})]}),(0,t.jsx)("div",{className:"flex gap-2 items-center"}),(0,t.jsx)("div",{className:"mt-auto",children:(0,t.jsxs)("div",{className:"p-2 flex flex-1 items-center gap-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Tickets per page:"}),(0,t.jsxs)("select",{value:r,onChange:e=>l(Number(e.target.value)),className:"border p-1 rounded",children:[(0,t.jsx)("option",{value:1,children:"1"}),(0,t.jsx)("option",{value:2,children:"2"}),(0,t.jsx)("option",{value:3,children:"3"})]}),(0,t.jsxs)("button",{onClick:()=>window.print(),className:"mt-auto flex items-center justify-center p-2 bg-blue-500 text-white rounded hover:bg-blue-600 flex-1 ml-2",children:[(0,t.jsx)(v.A,{className:"w-4 h-4 mr-2"}),"Print"]})]})})]})}function E(){let[e,r]=(0,d.useState)(1);return(0,t.jsxs)(u,{children:[(0,t.jsx)("div",{id:"print-wrapper",className:"h-screen hidden print:flex flex-col justify-between",children:Array.from({length:e}).map((e,r)=>(0,t.jsx)("div",{className:"print-ticket",children:(0,t.jsx)(g,{})},r))}),(0,t.jsxs)("div",{className:"flex h-screen print:hidden",children:[(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center bg-gray-100 px-4",children:(0,t.jsx)(g,{})}),(0,t.jsx)("div",{className:"min-w-[300px]",children:(0,t.jsx)(C,{ticketCount:e,setTicketCount:r})})]})]})}l(370)}},e=>{e.O(0,[213,545,579,586,443,441,255,358],()=>e(e.s=6765)),_N_E=e.O()}]);